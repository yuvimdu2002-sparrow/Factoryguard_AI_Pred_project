<!DOCTYPE html>
<html>

<head>
    <title>Machine Failure Prediction</title>
    <link rel="stylesheet" href="{{ url_for("static", filename="stylesheet.css") }}">
</head>

<body>
    <h1>Enter Sensor Values</h1>

    <img src="{{ url_for("static", filename="factoryguard_ai_image.png") }}">

    <form id="uploadForm">
        <div class=container>
            <div class=subcontainer>
                <span><b>Upload JSON Input File</b></span><br>
                <input type="file" id="jsonFile" accept=".json" required>
            </div>
            <div class=click>
                <button type="submit">Predict</button>
            </div>
            <div class=pred>
                <h3>Result:</h3>
                <pre id="result"></pre>
            </div>        
        </div>
    </form>

    <script>
        document.getElementById("uploadForm").addEventListener("submit", function (e) {
            e.preventDefault();

            const fileInput = document.getElementById("jsonFile");
            const formData = new FormData();
            formData.append("file", fileInput.files[0]);

            fetch("/predict_file", {
                method: "POST",
                body: formData
            })
                .then(res => res.json())
                .then(data => {
                    document.getElementById("result").innerText =
                        JSON.stringify(data, null, 2);
                });
        });
    </script>


</body>

</html>